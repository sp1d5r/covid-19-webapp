{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar buildQuery = function buildQuery(query, token) {\n  var country = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  var base_url = \"https://api.mapbox.com/geocoding/v5/mapbox.places/\";\n  var no_country = \"\".concat(base_url).concat(query, \".json?access_token=\").concat(token);\n  var with_country = \"\".concat(base_url).concat(query, \".json?country=\").concat(country, \"&access_token=\").concat(token);\n  return country ? with_country : no_country;\n};\n\nvar getResults = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(query, token) {\n    var country,\n        path,\n        testPath,\n        queryResults,\n        _args = arguments;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            country = _args.length > 2 && _args[2] !== undefined ? _args[2] : undefined;\n\n            if (!(query === \"\")) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {\n              response: {\n                features: []\n              }\n            });\n\n          case 3:\n            _context.prev = 3;\n            path = buildQuery(query, token, country); // Mapbox API returns an object which comes\n            // with a .json() method which asynchronously\n            // executes the query\n\n            _context.next = 7;\n            return fetch(path, {\n              headers: {\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 7:\n            testPath = _context.sent;\n\n            if (testPath.ok) {\n              _context.next = 10;\n              break;\n            }\n\n            throw Error(testPath.statusText);\n\n          case 10:\n            _context.next = 12;\n            return testPath.json();\n\n          case 12:\n            queryResults = _context.sent;\n            return _context.abrupt(\"return\", {\n              response: queryResults\n            });\n\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](3);\n            return _context.abrupt(\"return\", {\n              error: _context.t0\n            });\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3, 16]]);\n  }));\n\n  return function getResults(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _default = getResults;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/almazahmad/WebstormProjects/covid-webapp/node_modules/@seanhouli/react-mapbox-search/dist/utils/helpers.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_regenerator","_asyncToGenerator2","buildQuery","query","token","country","arguments","length","undefined","base_url","no_country","concat","with_country","getResults","_ref","mark","_callee","path","testPath","queryResults","_args","wrap","_callee$","_context","prev","next","abrupt","response","features","fetch","headers","sent","ok","Error","statusText","json","t0","error","stop","_x","_x2","apply","_default"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAA1B;;AAEA,IAAIE,YAAY,GAAGN,sBAAsB,CAACC,OAAO,CAAC,4BAAD,CAAR,CAAzC;;AAEA,IAAIM,kBAAkB,GAAGP,sBAAsB,CAACC,OAAO,CAAC,yCAAD,CAAR,CAA/C;;AAEA,IAAIO,UAAU,GAAG,SAASA,UAAT,CAAoBC,KAApB,EAA2BC,KAA3B,EAAkC;AACjD,MAAIC,OAAO,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoEE,SAAlF;AACA,MAAIC,QAAQ,GAAG,oDAAf;AACA,MAAIC,UAAU,GAAG,GAAGC,MAAH,CAAUF,QAAV,EAAoBE,MAApB,CAA2BR,KAA3B,EAAkC,qBAAlC,EAAyDQ,MAAzD,CAAgEP,KAAhE,CAAjB;AACA,MAAIQ,YAAY,GAAG,GAAGD,MAAH,CAAUF,QAAV,EAAoBE,MAApB,CAA2BR,KAA3B,EAAkC,gBAAlC,EAAoDQ,MAApD,CAA2DN,OAA3D,EAAoE,gBAApE,EAAsFM,MAAtF,CAA6FP,KAA7F,CAAnB;AACA,SAAOC,OAAO,GAAGO,YAAH,GAAkBF,UAAhC;AACD,CAND;;AAQA,IAAIG,UAAU,GACd,aACA,YAAY;AACV,MAAIC,IAAI,GAAG,CAAC,GAAGb,kBAAkB,CAAC,SAAD,CAAtB,GACX,aACAD,YAAY,CAAC,SAAD,CAAZ,CAAwBe,IAAxB,CAA6B,SAASC,OAAT,CAAiBb,KAAjB,EAAwBC,KAAxB,EAA+B;AAC1D,QAAIC,OAAJ;AAAA,QACIY,IADJ;AAAA,QAEIC,QAFJ;AAAA,QAGIC,YAHJ;AAAA,QAIIC,KAAK,GAAGd,SAJZ;AAKA,WAAON,YAAY,CAAC,SAAD,CAAZ,CAAwBqB,IAAxB,CAA6B,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AAC9D,aAAO,CAAP,EAAU;AACR,gBAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;AACE,eAAK,CAAL;AACEpB,YAAAA,OAAO,GAAGe,KAAK,CAACb,MAAN,GAAe,CAAf,IAAoBa,KAAK,CAAC,CAAD,CAAL,KAAaZ,SAAjC,GAA6CY,KAAK,CAAC,CAAD,CAAlD,GAAwDZ,SAAlE;;AAEA,gBAAI,EAAEL,KAAK,KAAK,EAAZ,CAAJ,EAAqB;AACnBoB,cAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA;AACD;;AAED,mBAAOF,QAAQ,CAACG,MAAT,CAAgB,QAAhB,EAA0B;AAC/BC,cAAAA,QAAQ,EAAE;AACRC,gBAAAA,QAAQ,EAAE;AADF;AADqB,aAA1B,CAAP;;AAMF,eAAK,CAAL;AACEL,YAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAP,YAAAA,IAAI,GAAGf,UAAU,CAACC,KAAD,EAAQC,KAAR,EAAeC,OAAf,CAAjB,CAFF,CAE4C;AAC1C;AACA;;AAEAkB,YAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA,mBAAOI,KAAK,CAACZ,IAAD,EAAO;AACjBa,cAAAA,OAAO,EAAE;AACP,gCAAgB;AADT;AADQ,aAAP,CAAZ;;AAMF,eAAK,CAAL;AACEZ,YAAAA,QAAQ,GAAGK,QAAQ,CAACQ,IAApB;;AAEA,gBAAIb,QAAQ,CAACc,EAAb,EAAiB;AACfT,cAAAA,QAAQ,CAACE,IAAT,GAAgB,EAAhB;AACA;AACD;;AAED,kBAAMQ,KAAK,CAACf,QAAQ,CAACgB,UAAV,CAAX;;AAEF,eAAK,EAAL;AACEX,YAAAA,QAAQ,CAACE,IAAT,GAAgB,EAAhB;AACA,mBAAOP,QAAQ,CAACiB,IAAT,EAAP;;AAEF,eAAK,EAAL;AACEhB,YAAAA,YAAY,GAAGI,QAAQ,CAACQ,IAAxB;AACA,mBAAOR,QAAQ,CAACG,MAAT,CAAgB,QAAhB,EAA0B;AAC/BC,cAAAA,QAAQ,EAAER;AADqB,aAA1B,CAAP;;AAIF,eAAK,EAAL;AACEI,YAAAA,QAAQ,CAACC,IAAT,GAAgB,EAAhB;AACAD,YAAAA,QAAQ,CAACa,EAAT,GAAcb,QAAQ,CAAC,OAAD,CAAR,CAAkB,CAAlB,CAAd;AACA,mBAAOA,QAAQ,CAACG,MAAT,CAAgB,QAAhB,EAA0B;AAC/BW,cAAAA,KAAK,EAAEd,QAAQ,CAACa;AADe,aAA1B,CAAP;;AAIF,eAAK,EAAL;AACA,eAAK,KAAL;AACE,mBAAOb,QAAQ,CAACe,IAAT,EAAP;AAzDJ;AA2DD;AACF,KA9DM,EA8DJtB,OA9DI,EA8DK,IA9DL,EA8DW,CAAC,CAAC,CAAD,EAAI,EAAJ,CAAD,CA9DX,CAAP;AA+DD,GArED,CAFW,CAAX;;AAyEA,SAAO,SAASH,UAAT,CAAoB0B,EAApB,EAAwBC,GAAxB,EAA6B;AAClC,WAAO1B,IAAI,CAAC2B,KAAL,CAAW,IAAX,EAAiBnC,SAAjB,CAAP;AACD,GAFD;AAGD,CA7ED,EAFA;;AAiFA,IAAIoC,QAAQ,GAAG7B,UAAf;AACAf,OAAO,CAAC,SAAD,CAAP,GAAqB4C,QAArB","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar buildQuery = function buildQuery(query, token) {\n  var country = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  var base_url = \"https://api.mapbox.com/geocoding/v5/mapbox.places/\";\n  var no_country = \"\".concat(base_url).concat(query, \".json?access_token=\").concat(token);\n  var with_country = \"\".concat(base_url).concat(query, \".json?country=\").concat(country, \"&access_token=\").concat(token);\n  return country ? with_country : no_country;\n};\n\nvar getResults =\n/*#__PURE__*/\nfunction () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])(\n  /*#__PURE__*/\n  _regenerator[\"default\"].mark(function _callee(query, token) {\n    var country,\n        path,\n        testPath,\n        queryResults,\n        _args = arguments;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            country = _args.length > 2 && _args[2] !== undefined ? _args[2] : undefined;\n\n            if (!(query === \"\")) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {\n              response: {\n                features: []\n              }\n            });\n\n          case 3:\n            _context.prev = 3;\n            path = buildQuery(query, token, country); // Mapbox API returns an object which comes\n            // with a .json() method which asynchronously\n            // executes the query\n\n            _context.next = 7;\n            return fetch(path, {\n              headers: {\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 7:\n            testPath = _context.sent;\n\n            if (testPath.ok) {\n              _context.next = 10;\n              break;\n            }\n\n            throw Error(testPath.statusText);\n\n          case 10:\n            _context.next = 12;\n            return testPath.json();\n\n          case 12:\n            queryResults = _context.sent;\n            return _context.abrupt(\"return\", {\n              response: queryResults\n            });\n\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](3);\n            return _context.abrupt(\"return\", {\n              error: _context.t0\n            });\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3, 16]]);\n  }));\n\n  return function getResults(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _default = getResults;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}