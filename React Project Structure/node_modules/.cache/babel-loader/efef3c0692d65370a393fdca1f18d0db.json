{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _Suggestions = _interopRequireDefault(require(\"./Suggestions\"));\n\nvar _SearchInput = _interopRequireDefault(require(\"./SearchInput\"));\n\nvar _helpers = _interopRequireDefault(require(\"../utils/helpers\"));\n\nfunction _templateObject() {\n  var data = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  width: 100%;\\n  height: 42px;\\n\\n  svg {\\n    position: absolute;\\n    left: 15px;\\n    top: 50%;\\n    transform: translate(0, -50%);\\n    fill: #d3d3d3;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar SearchBoxWrapper = _styledComponents[\"default\"].div(_templateObject());\n\nvar isTouch = \"ontouchstart\" in window || navigator.msMaxTouchPoints > 0;\n\nvar SearchBox = /*#__PURE__*/function (_React$Component) {\n  (0, _inherits2[\"default\"])(SearchBox, _React$Component);\n\n  function SearchBox(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, SearchBox);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(SearchBox).call(this, props));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleInputChange\", function (event) {\n      _this.setState({\n        query: event.target.value\n      }, function () {\n        _this.sendQuery();\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"showResults\", function () {\n      var _this$state = _this.state,\n          queryResults = _this$state.queryResults,\n          inputFocused = _this$state.inputFocused;\n      return queryResults.length > 0 && inputFocused;\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleClick\", function (_ref) {\n      var event = _ref.event,\n          location = _ref.location;\n\n      _this.setState({\n        query: location.place_name,\n        cursorIdx: 0,\n        getMouseInSuggestions: false\n      });\n\n      if (_this.props.callback) {\n        _this.props.callback({\n          location: location,\n          event: event\n        });\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleArrowKeys\", function (event) {\n      if (_this.state.getMouseInSuggestions) {\n        return;\n      }\n\n      var keyIsLetter = event.keyCode >= 65 && event.keyCode <= 90;\n      var keyIsBackspace = event.keyCode == 8;\n\n      if ((keyIsLetter || keyIsBackspace) && _this.state.cursorIdx !== 0) {\n        _this.setState({\n          cursorIdx: 0\n        });\n      }\n\n      var _this$state2 = _this.state,\n          queryResults = _this$state2.queryResults,\n          cursorIdx = _this$state2.cursorIdx;\n\n      switch (event.keyCode) {\n        case 38:\n          {\n            // up arrow pressed\n            event.preventDefault();\n            if (_this.showResults() && cursorIdx > 0) _this.setState(function (prevState) {\n              return {\n                cursorIdx: prevState.cursorIdx - 1\n              };\n            });\n            break;\n          }\n\n        case 40:\n          {\n            // down arrow pressed\n            event.preventDefault();\n            if (_this.showResults() && cursorIdx < queryResults.length - 1) _this.setState(function (prevState) {\n              return {\n                cursorIdx: prevState.cursorIdx + 1\n              };\n            });\n            break;\n          }\n\n        case 13:\n          {\n            // enter pressed\n            event.preventDefault();\n\n            if (_this.showResults()) {\n              document.activeElement.blur();\n\n              _this.handleClick({\n                location: queryResults[cursorIdx]\n              });\n            }\n\n            break;\n          }\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"getMouseInSuggestions\", function (bool) {\n      var cursorIdx = _this.state.cursorIdx;\n\n      _this.setState(function (prevState) {\n        if (prevState !== bool) {\n          _this.setState({\n            getMouseInSuggestions: bool\n          });\n        }\n      });\n\n      if (bool && cursorIdx !== 0) {\n        _this.setState({\n          cursorIdx: 0\n        });\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleFocus\", function () {\n      _this.setState({\n        inputFocused: true\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleBlur\", function () {\n      _this.setState({\n        inputFocused: false\n      });\n    });\n    _this.state = {\n      query: props.query,\n      queryResults: [],\n      cursorIdx: 0,\n      getMouseInSuggestions: false,\n      inputFocused: false\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(SearchBox, [{\n    key: \"sendQuery\",\n    value: function () {\n      var _sendQuery = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var _this$props, token, country, queryResults;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$props = this.props, token = _this$props.token, country = _this$props.country;\n                _context.prev = 1;\n                _context.next = 4;\n                return (0, _helpers[\"default\"])(this.state.query, token, country);\n\n              case 4:\n                queryResults = _context.sent;\n\n                if (!queryResults.error) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw Error(queryResults.error);\n\n              case 7:\n                this.setState({\n                  queryResults: queryResults.response.features\n                });\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(\"Error connecting to MapBox api, check internet / api token\");\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 10]]);\n      }));\n\n      function sendQuery() {\n        return _sendQuery.apply(this, arguments);\n      }\n\n      return sendQuery;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state3 = this.state,\n          queryResults = _this$state3.queryResults,\n          query = _this$state3.query,\n          cursorIdx = _this$state3.cursorIdx,\n          getMouseInSuggestions = _this$state3.getMouseInSuggestions;\n      return _react[\"default\"].createElement(SearchBoxWrapper, {\n        onMouseLeave: !isTouch && this.handleMouseLeave,\n        onKeyDown: !isTouch && this.handleArrowKeys,\n        onMouseEnter: !isTouch && this.handleMouseEnter\n      }, _react[\"default\"].createElement(_SearchInput[\"default\"], {\n        hasResults: this.showResults(),\n        value: query,\n        handleFocus: this.handleFocus,\n        handleBlur: this.handleBlur,\n        searchHint: this.props.searchHint,\n        handleInputChange: this.handleInputChange\n      }), _react[\"default\"].createElement(_Suggestions[\"default\"], {\n        places: queryResults,\n        selectColor: this.props.selectColor,\n        hasResults: this.showResults(),\n        clickHandler: this.handleClick,\n        isTouch: isTouch,\n        cursorIdx: cursorIdx,\n        mouseInSuggestions: getMouseInSuggestions,\n        getMouseInSuggestions: this.getMouseInSuggestions\n      }));\n    }\n  }]);\n  return SearchBox;\n}(_react[\"default\"].Component);\n\nSearchBox.propTypes = {\n  /**\n   *  token for MapBox api\n   */\n  token: _propTypes[\"default\"].string.isRequired,\n\n  /**\n   *  ISO 3166-1 country code for MapBox api to narrow search\n   */\n  country: _propTypes[\"default\"].string,\n\n  /**\n   *  callback function when user clicks suggestion, provides location object and click event object (when mouse click) as arguments\n   */\n  callback: _propTypes[\"default\"].func,\n\n  /**\n   *  color of currently selected suggestion\n   */\n  selectColor: _propTypes[\"default\"].string,\n\n  /**\n   *  hint text for input\n   */\n  searchHint: _propTypes[\"default\"].string,\n\n  /**\n   *  default query text\n   */\n  query: _propTypes[\"default\"].string\n};\nSearchBox.defaultProps = {\n  country: undefined,\n  selectColor: \"#58a\",\n  callback: undefined,\n  searchHint: \"Search\",\n  query: \"\"\n};\nvar _default = SearchBox;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/almazahmad/WebstormProjects/covid-webapp/node_modules/@seanhouli/react-mapbox-search/dist/Components/SearchBox.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_assertThisInitialized2","_inherits2","_defineProperty2","_taggedTemplateLiteral2","_react","_propTypes","_styledComponents","_Suggestions","_SearchInput","_helpers","_templateObject","data","SearchBoxWrapper","div","isTouch","window","navigator","msMaxTouchPoints","SearchBox","_React$Component","props","_this","call","event","setState","query","target","sendQuery","_this$state","state","queryResults","inputFocused","length","_ref","location","place_name","cursorIdx","getMouseInSuggestions","callback","keyIsLetter","keyCode","keyIsBackspace","_this$state2","preventDefault","showResults","prevState","document","activeElement","blur","handleClick","bool","key","_sendQuery","mark","_callee","_this$props","token","country","wrap","_callee$","_context","prev","next","sent","error","Error","response","features","t0","console","log","stop","apply","arguments","render","_this$state3","createElement","onMouseLeave","handleMouseLeave","onKeyDown","handleArrowKeys","onMouseEnter","handleMouseEnter","hasResults","handleFocus","handleBlur","searchHint","handleInputChange","places","selectColor","clickHandler","mouseInSuggestions","Component","propTypes","string","isRequired","func","defaultProps","undefined","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _Suggestions = _interopRequireDefault(require(\"./Suggestions\"));\n\nvar _SearchInput = _interopRequireDefault(require(\"./SearchInput\"));\n\nvar _helpers = _interopRequireDefault(require(\"../utils/helpers\"));\n\nfunction _templateObject() {\n  var data = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  width: 100%;\\n  height: 42px;\\n\\n  svg {\\n    position: absolute;\\n    left: 15px;\\n    top: 50%;\\n    transform: translate(0, -50%);\\n    fill: #d3d3d3;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar SearchBoxWrapper = _styledComponents[\"default\"].div(_templateObject());\n\nvar isTouch = \"ontouchstart\" in window || navigator.msMaxTouchPoints > 0;\n\nvar SearchBox =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inherits2[\"default\"])(SearchBox, _React$Component);\n\n  function SearchBox(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, SearchBox);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(SearchBox).call(this, props));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleInputChange\", function (event) {\n      _this.setState({\n        query: event.target.value\n      }, function () {\n        _this.sendQuery();\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"showResults\", function () {\n      var _this$state = _this.state,\n          queryResults = _this$state.queryResults,\n          inputFocused = _this$state.inputFocused;\n      return queryResults.length > 0 && inputFocused;\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleClick\", function (_ref) {\n      var event = _ref.event,\n          location = _ref.location;\n\n      _this.setState({\n        query: location.place_name,\n        cursorIdx: 0,\n        getMouseInSuggestions: false\n      });\n\n      if (_this.props.callback) {\n        _this.props.callback({\n          location: location,\n          event: event\n        });\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleArrowKeys\", function (event) {\n      if (_this.state.getMouseInSuggestions) {\n        return;\n      }\n\n      var keyIsLetter = event.keyCode >= 65 && event.keyCode <= 90;\n      var keyIsBackspace = event.keyCode == 8;\n\n      if ((keyIsLetter || keyIsBackspace) && _this.state.cursorIdx !== 0) {\n        _this.setState({\n          cursorIdx: 0\n        });\n      }\n\n      var _this$state2 = _this.state,\n          queryResults = _this$state2.queryResults,\n          cursorIdx = _this$state2.cursorIdx;\n\n      switch (event.keyCode) {\n        case 38:\n          {\n            // up arrow pressed\n            event.preventDefault();\n            if (_this.showResults() && cursorIdx > 0) _this.setState(function (prevState) {\n              return {\n                cursorIdx: prevState.cursorIdx - 1\n              };\n            });\n            break;\n          }\n\n        case 40:\n          {\n            // down arrow pressed\n            event.preventDefault();\n            if (_this.showResults() && cursorIdx < queryResults.length - 1) _this.setState(function (prevState) {\n              return {\n                cursorIdx: prevState.cursorIdx + 1\n              };\n            });\n            break;\n          }\n\n        case 13:\n          {\n            // enter pressed\n            event.preventDefault();\n\n            if (_this.showResults()) {\n              document.activeElement.blur();\n\n              _this.handleClick({\n                location: queryResults[cursorIdx]\n              });\n            }\n\n            break;\n          }\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"getMouseInSuggestions\", function (bool) {\n      var cursorIdx = _this.state.cursorIdx;\n\n      _this.setState(function (prevState) {\n        if (prevState !== bool) {\n          _this.setState({\n            getMouseInSuggestions: bool\n          });\n        }\n      });\n\n      if (bool && cursorIdx !== 0) {\n        _this.setState({\n          cursorIdx: 0\n        });\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleFocus\", function () {\n      _this.setState({\n        inputFocused: true\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleBlur\", function () {\n      _this.setState({\n        inputFocused: false\n      });\n    });\n    _this.state = {\n      query: props.query,\n      queryResults: [],\n      cursorIdx: 0,\n      getMouseInSuggestions: false,\n      inputFocused: false\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(SearchBox, [{\n    key: \"sendQuery\",\n    value: function () {\n      var _sendQuery = (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regenerator[\"default\"].mark(function _callee() {\n        var _this$props, token, country, queryResults;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$props = this.props, token = _this$props.token, country = _this$props.country;\n                _context.prev = 1;\n                _context.next = 4;\n                return (0, _helpers[\"default\"])(this.state.query, token, country);\n\n              case 4:\n                queryResults = _context.sent;\n\n                if (!queryResults.error) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw Error(queryResults.error);\n\n              case 7:\n                this.setState({\n                  queryResults: queryResults.response.features\n                });\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(\"Error connecting to MapBox api, check internet / api token\");\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 10]]);\n      }));\n\n      function sendQuery() {\n        return _sendQuery.apply(this, arguments);\n      }\n\n      return sendQuery;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state3 = this.state,\n          queryResults = _this$state3.queryResults,\n          query = _this$state3.query,\n          cursorIdx = _this$state3.cursorIdx,\n          getMouseInSuggestions = _this$state3.getMouseInSuggestions;\n      return _react[\"default\"].createElement(SearchBoxWrapper, {\n        onMouseLeave: !isTouch && this.handleMouseLeave,\n        onKeyDown: !isTouch && this.handleArrowKeys,\n        onMouseEnter: !isTouch && this.handleMouseEnter\n      }, _react[\"default\"].createElement(_SearchInput[\"default\"], {\n        hasResults: this.showResults(),\n        value: query,\n        handleFocus: this.handleFocus,\n        handleBlur: this.handleBlur,\n        searchHint: this.props.searchHint,\n        handleInputChange: this.handleInputChange\n      }), _react[\"default\"].createElement(_Suggestions[\"default\"], {\n        places: queryResults,\n        selectColor: this.props.selectColor,\n        hasResults: this.showResults(),\n        clickHandler: this.handleClick,\n        isTouch: isTouch,\n        cursorIdx: cursorIdx,\n        mouseInSuggestions: getMouseInSuggestions,\n        getMouseInSuggestions: this.getMouseInSuggestions\n      }));\n    }\n  }]);\n  return SearchBox;\n}(_react[\"default\"].Component);\n\nSearchBox.propTypes = {\n  /**\n   *  token for MapBox api\n   */\n  token: _propTypes[\"default\"].string.isRequired,\n\n  /**\n   *  ISO 3166-1 country code for MapBox api to narrow search\n   */\n  country: _propTypes[\"default\"].string,\n\n  /**\n   *  callback function when user clicks suggestion, provides location object and click event object (when mouse click) as arguments\n   */\n  callback: _propTypes[\"default\"].func,\n\n  /**\n   *  color of currently selected suggestion\n   */\n  selectColor: _propTypes[\"default\"].string,\n\n  /**\n   *  hint text for input\n   */\n  searchHint: _propTypes[\"default\"].string,\n\n  /**\n   *  default query text\n   */\n  query: _propTypes[\"default\"].string\n};\nSearchBox.defaultProps = {\n  country: undefined,\n  selectColor: \"#58a\",\n  callback: undefined,\n  searchHint: \"Search\",\n  query: \"\"\n};\nvar _default = SearchBox;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}